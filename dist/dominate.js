'use strict';// The DOMinate parser
function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var DOMParser=/*#__PURE__*/function(){// Construct a new instance of `DOMParser`
function a(b){_classCallCheck(this,a),this.src=b,this.pos=0}// Skip whitespace tokens
return _createClass(a,[{key:"skipWhitespace",value:function skipWhitespace(){if(!(this.pos>=this.src.length))for(;/\s/.test(this.src[this.pos]);)this.pos+=1}// Read all tokens
},{key:"readAll",value:function readAll(){for(var a=[],b=null;(b=this.next())&&!0!==b;){if(!1===b)return console.log("Unable to complete parsing."),[];a.push(b)}return a}// Validate token stream
},{key:"validate",value:function validate(a){var b=function(c){return a.filter(function(a){return a.T===c}).length},c=b("NAME"),d=b("ID"),e=b("CONTENT"),f=function(a){return 1>=b(a)},g=function(a){return console.error(a),!1},h=!0;return h&=f("NAME")||g("Too many element names (max: 1)"),h&=f("ID")||g("Too many IDs (max: 1)"),h&=f("CONTENT")||g("Too many content blocks (max: 1)"),h}// Parse source into token stream
},{key:"parse",value:function parse(){var a=this.readAll();return this.validate(a)?a:void 0}// Process the next token
},{key:"next",value:function next(){if(this.skipWhitespace(),this.pos>=this.src.length)return!0;if(0===this.pos&&/[a-z_]+/i.test(this.src))return this.readName();switch(this.src[this.pos]){case".":return this.readClass();case"#":return this.readId();case"[":return this.readAttr();case":":return this.readContent();}return console.error("Invalid character: \"".concat(this.src[this.pos],"\"")),console.error("== Input was: ".concat(this.src)),!1}// Read an element name
},{key:"readName",value:function readName(){var a=/([a-z_]+[a-z0-9_]*)/i.exec(this.src.slice(this.pos))[1];return this.pos+=a.length,{T:"NAME",val:a}}// Read a class
},{key:"readClass",value:function readClass(){var a=/\.(-?[_a-z]+[_a-z0-9-]*)/i.exec(this.src.slice(this.pos))[1];return this.pos+=1+a.length,{T:"CLASS",val:a}}// Read an ID
},{key:"readId",value:function readId(){var a=/#([a-z][_a-z0-9-]*)/i.exec(this.src.slice(this.pos))[1];return this.pos+=1+a.length,{T:"ID",val:a}}// Read an attribute
},{key:"readAttr",value:function readAttr(){var a=/\[([^\t\n\f \/>"'=.#\[\]]+)(?:=((?:"[^"]*")|(?:.*?)))?\]/i.exec(this.src.slice(this.pos)),b=_slicedToArray(a,3),c=b[0],d=b[1],e=b[2];return this.pos+=(e?3:2)+d.length+(e||"").length,{T:"ATTR",val:{key:d,value:e}}}// Read content
},{key:"readContent",value:function readContent(){var a=/:(.*)/.exec(this.src.slice(this.pos))[1];return this.pos+=1+a.length,{T:"CONTENT",val:a.trim()}}}]),a}(),DOMinate=/*#__PURE__*/function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"_createElement",// Create an element
value:function _createElement(a){var b;// Return q if it's already an HTMLElement
if(a instanceof HTMLElement)return a;// Parse the query string into a kind of AST
var c=new DOMParser(a),d=c.parse(),e=document.createElement((d.filter(function(a){return"NAME"===a.T})[0]||{val:"div"}).val);// Return the finished element
return(b=e.classList).add.apply(b,_toConsumableArray(d.filter(function(a){return"CLASS"===a.T}).map(function(a){return a.val}))),e.id=(d.filter(function(a){return"ID"===a.T})[0]||{val:e.id}).val,d.filter(function(a){return"ATTR"===a.T}).map(function(a){return a.val}).forEach(function(a){var b=a.key,c=a.value;return e.setAttribute(b,c||"")}),e.innerHTML=(d.filter(function(a){return"CONTENT"===a.T})[0]||{val:""}).val,e}},{key:"one",value:function one(b){return b instanceof HTMLElement?b:a._createElement(b)}},{key:"many",value:function many(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.map(function(b){return b instanceof HTMLElement?b:a._createElement(b)})}},{key:"append",value:function append(b){b="string"==typeof b?document.querySelector(b):b;for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];a.many.apply(a,d).map(function(a){return b.appendChild(a)})}}]),a}();// The DOMinate utility class